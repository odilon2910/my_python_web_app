name : build and integrate image to DockerHub
on :
  push :
    branches : [ main ]
  workflow_dispatch :
jobs:
  docker :
    runs-on : ubuntu-latest
    steps :
      - name : checkout repository
        uses : actions/checkout@v3
      - name : build docker image
        run : |
          docker build -t vonona/my_python_web_app:latest .
      - name : login to DockerHub
        uses : docker/login-action@v2
        with :
          username : ${ { secrets.DOCKER_USERNAME } }
          password : ${ { secrets.DOCKER_PASSWORD } }
      - name : push to DockerHub
        run : |
          docker push vonona/my_python_web_app:latest